{"version":3,"sources":["actions/actions.js","components/Card/Card.js","components/CardList/CardList.js","components/App/App.js","components/CardListMaker/CardListMaker.js","reducer/reducer.js","index.js"],"names":["flip","id","type","reset","connect","state","actions","color","isFlipped","isOpened","className","styles","backgroundColor","style","onClick","cards","map","item","score","maxScore","setTimeout","alert","shuffle","array","i","length","j","Math","floor","random","getRandomColor","red","green","blue","initialState","round","selectedItem","num","k","push","group","CardListMaker","Array","prototype","find","Object","defineProperty","value","predicate","this","TypeError","o","len","thisArg","arguments","kValue","call","configurable","writable","reducer","action","idxCard","card","newState","store","createStore","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.fbec912f.chunk.js","sourcesContent":["export const flip = id => ({\r\n    type: 'FLIP',\r\n    id\r\n});\r\n\r\nexport const reset = () => ({\r\n    type: 'RESET'\r\n});","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport * as actions from '../../actions/actions';\r\nimport './Card.css';\r\n\r\nconst Card = ({ id, color, isFlipped, isOpened, flip }) => {\r\n    const className = isOpened ? 'card opened' : 'card';\r\n    const styles = {\r\n        backgroundColor: isFlipped ? color : null,\r\n    }\r\n    return (\r\n        <div className={className} style={styles} onClick={() => flip(id)}>\r\n        </div>\r\n    )\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, actions)(Card);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Card from \"../Card/Card\";\r\n\r\nconst CardList = ({ cards }) => {\r\n    const cardList = cards.map(item => <Card\r\n                                        key={item.id}\r\n                                        id={item.id}\r\n                                        color={item.color}\r\n                                        isFlipped={item.isFlipped}\r\n                                        isOpened={item.isOpened}/>)\r\n    return (\r\n        cardList\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        cards: state.cards,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(CardList)","import React from 'react';\nimport { connect } from 'react-redux';\nimport * as actions from '../../actions/actions';\nimport './App.css';\nimport CardList from \"../CardList/CardList\";\n\nconst App = ({ score, maxScore, reset }) => {\n    if (score >= maxScore) {\n        setTimeout(() => alert('Congratulation! You win!'), 2000);\n        setTimeout(reset, 5000);\n    }\n    return (\n        <div className=\"game-field\">\n            <CardList />\n        </div>\n    );\n}\n\nconst mapStateToProps = state => {\n    return {\n        score: state.score,\n        maxScore: state.maxScore\n    }\n}\n\nexport default connect(mapStateToProps, actions)(App);\n","export const CardListMaker = (num = 16) => {\r\n    const cards = [];\r\n    for (let i = 1; i <= num; i += 2) {\r\n        const color = getRandomColor();\r\n        for (let k = i; k <= i+1; k++) {\r\n            cards.push({\r\n                id: k,\r\n                group: i,\r\n                color,\r\n                isFlipped: false,\r\n                isOpened: false\r\n            })\r\n        }\r\n    }\r\n    return shuffle(cards);\r\n};\r\n\r\n//перемешивание массива\r\nconst shuffle = (array) => {\r\n    for (let i = array.length - 1; i > 0; i--) {\r\n        let j = Math.floor(Math.random() * (i + 1));\r\n\r\n        [array[i], array[j]] = [array[j], array[i]];\r\n    }\r\n    return array;\r\n}\r\n\r\nconst getRandomColor = () => {\r\n    const red = Math.floor( Math.random() * 255 );\r\n    const green = Math.floor( Math.random() * 255 );\r\n    const blue = Math.floor( Math.random() * 255 );\r\n    return `rgb( ${red}, ${green}, ${blue} ) `;\r\n}","import { CardListMaker } from '../components/CardListMaker/CardListMaker';\r\n\r\nconst initialState = {\r\n    round: 1,\r\n    selectedItem: null,\r\n    score: 0,\r\n    maxScore: 16, //количество карт = условие победы\r\n    cards: CardListMaker()\r\n};\r\n\r\nconst reducer = (state = initialState, action) => {\r\n    if (action.type === 'FLIP') {\r\n        const idxCard = state.cards.find(card => card.id === action.id)\r\n        //проверка, не пытаемся ли открыть открытую карту\r\n        if (idxCard.isFlipped || idxCard.isOpened) return state;\r\n\r\n        let newState = { };\r\n        let round = state.round + 1\r\n\r\n        //если раунд нечетный (открываем первую карту в паре)\r\n        if (state.round % 2 === 1){\r\n\r\n            //записываем группу выбранной карты в хранилище\r\n            newState = {round,\r\n                selectedItem: idxCard.group,\r\n                score: state.score,\r\n                maxScore: state.maxScore,\r\n                cards: state.cards.map(card => {\r\n                return card.id === action.id ?\r\n                    {...card, isFlipped: true} :\r\n                    {...card, isFlipped: false}\r\n                })} ;\r\n        }\r\n        //если раунд четный (открываем вторую карту в паре)\r\n        if(state.round % 2 === 0){\r\n\r\n            //если группа открытой карты совпадает с записанной в хранилище, то меняем флаги на true\r\n            if(idxCard.group === state.selectedItem){\r\n                newState = {round,\r\n                    score: state.score + 2,\r\n                    maxScore: state.maxScore,\r\n                    selectedItem: state.selectedItem,\r\n                    cards: state.cards.map(card => {\r\n                        return (card.id === action.id || card.group === state.selectedItem) ?\r\n                            {...card, isFlipped: true, isOpened: true } :\r\n                            card\r\n                    })\r\n                }\r\n            }\r\n            //если группа открытой карты не совпадает с записанной в хранилище, то просто показываем её\r\n            if(idxCard.group !== state.selectedItem){\r\n                newState = {round,\r\n                    score: state.score,\r\n                    maxScore: state.maxScore,\r\n                    selectedItem: state.selectedItem,\r\n                    cards: state.cards.map(card => {\r\n                        return card.id === action.id ?\r\n                            {...card, isFlipped: true} :\r\n                            card\r\n                    })\r\n                }\r\n            }\r\n        }\r\n\r\n        return newState;\r\n    }\r\n    if (action.type === 'RESET') return initialState;\r\n    return state;\r\n}\r\n\r\n//polyfill для find (привет IE)\r\nif (!Array.prototype.find) {\r\n    Object.defineProperty(Array.prototype, 'find', {\r\n        value: function(predicate) {\r\n            // 1. Let O be ? ToObject(this value).\r\n            if (this == null) {\r\n                throw new TypeError('\"this\" is null or not defined');\r\n            }\r\n\r\n            var o = Object(this);\r\n\r\n            // 2. Let len be ? ToLength(? Get(O, \"length\")).\r\n            var len = o.length >>> 0;\r\n\r\n            // 3. If IsCallable(predicate) is false, throw a TypeError exception.\r\n            if (typeof predicate !== 'function') {\r\n                throw new TypeError('predicate must be a function');\r\n            }\r\n\r\n            // 4. If thisArg was supplied, let T be thisArg; else let T be undefined.\r\n            var thisArg = arguments[1];\r\n\r\n            // 5. Let k be 0.\r\n            var k = 0;\r\n\r\n            // 6. Repeat, while k < len\r\n            while (k < len) {\r\n                // a. Let Pk be ! ToString(k).\r\n                // b. Let kValue be ? Get(O, Pk).\r\n                // c. Let testResult be ToBoolean(? Call(predicate, T, « kValue, k, O »)).\r\n                // d. If testResult is true, return kValue.\r\n                var kValue = o[k];\r\n                if (predicate.call(thisArg, kValue, k, o)) {\r\n                    return kValue;\r\n                }\r\n                // e. Increase k by 1.\r\n                k++;\r\n            }\r\n\r\n            // 7. Return undefined.\r\n            return undefined;\r\n        },\r\n        configurable: true,\r\n        writable: true\r\n    });\r\n}\r\n\r\nexport default reducer;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App/App';\nimport {createStore} from \"redux\";\nimport {Provider} from 'react-redux';\nimport reducer from './reducer/reducer';\nimport './index.css';\n\nconst store = createStore(reducer);\n\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}